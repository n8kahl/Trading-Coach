[phases.setup]
# Ensure Node.js and Python are available for the build
nixPkgs = ["nodejs_20", "python312", "gcc"]

[phases.build]
# Build the React frontâ€‘end (if present) into frontend_dist/
cmds = [
  "if [ -d web ]; then if [ -f web/package-lock.json ]; then npm --prefix web ci; else npm --prefix web install; fi && npm --prefix web run build; fi"
]
